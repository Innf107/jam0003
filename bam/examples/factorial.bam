machine Factorial {
    -- There is some black magic going on here ...
    -- I'm not entirely sure why this, _and only this_
    -- stops Main from consuming all of 42. ¯\_(ツ)_/¯
    let x, y, z = !input -> Dup3;
    ((x, 1) -> Lt)
        ? 1
        : (((y, 1) -> Sub -> Factorial), z) -> Mul
}

machine Drain {
    (((input -> Write), null) -> Eq)
        ? null
        : input -> Drain
}

machine Main {
    let factorials = integers -> Factorial;
    factorials -> Drain
}
